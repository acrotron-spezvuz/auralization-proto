<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <style>
        * {
            margin: 10px;
        }
    </style>
    <title>Auralization</title>
</head>
<body>

    <!-- Content here -->
    <h4>Auralization</h4>
    <hr />
    <form id="source-form" >

        <label for="source">Sound Source:</label>
        <select name="source" required>
            <option value="" selected="selected">Select a source</option>
            <option value="0">Car</option>
            <option value="1">Truck</option>
            <option value="2">Bus</option>
            <option value="3">Airplane</option>
            <option value="4">Helicopter</option>
        </select>

        <label for="height">Height</label>
        <input name="height" type="number" value="0" required /> <br />

        <label for="lat">Latitude</label>
        <input name="lat" type="number" min="-90" max="90" required/>
        
        <label for="lon">Longitude</label>
        <input name="lon" type="number" min="-180" max="180" required/> <br />

        <label for="vx">Velocity X</label>
        <input name="vx" type="number" required/>

        <label for="vy">Velocity Y</label>
        <input name="vy" type="number" required/>

        <label for="vz">Velocity Z</label>
        <input name="vz" type="number" required/> <br />

        <button type="submit">Add sound source</button>
    </form>
    <br />
    <table>
        <thead>
            <tr>
                <th scope="col">#</th>
                <th scope="col">Source</th>
                <th scope="col">Height</th>
                <th scope="col">Lat</th>
                <th scope="col">Lon</th>
                <th scope="col">Vx</th>
                <th scope="col">Vy</th>
                <th scope="col">Vz</th>
            </tr>
        </thead>
        <tbody></tbody>
    </table>

    <!-- Scripts  here -->
    <script>
        (function () {
            'use strict';

            window.addEventListener('load', function () {

                // empty source list 
                let sources = [];

                // conver form data to json object
                const formToJson = elements => [].reduce.call(elements, (data, element) => {
                    data[element.name] = element.value;
                    return data;
                }, {});

                // handle submit event
                const handleSourceSubmit = event => {
                  
                    event.preventDefault();
                    let source = formToJson(sourceForm.elements);
                    sources.push(source);
                    console.log(sources);
                    sourceForm.reset();
                }

                // get source form
                const sourceForm = document.getElementById('source-form');

                // listen to submit event
                sourceForm.addEventListener('submit', handleSourceSubmit);
            });
        })();
    </script>
</body>
</html>